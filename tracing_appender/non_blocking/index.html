<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A non-blocking, off-thread writer."><meta name="keywords" content="rust, rustlang, rust-lang, non_blocking"><title>tracing_appender::non_blocking - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../tracing_appender/index.html'><div class='logo-container rust-logo'><img src='https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;tokio-rs&#x2F;tracing&#x2F;master&#x2F;assets&#x2F;logo-type.png' alt='logo'></div></a><h2 class="location">Module non_blocking</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li></ul></div><div id="sidebar-vars" data-name="non_blocking" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">tracing_appender</a>::<wbr><a class="mod" href="#">non_blocking</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/tracing_appender/non_blocking.rs.html#1-432" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A non-blocking, off-thread writer.</p>
<p>This spawns a dedicated worker thread which is responsible for writing log
lines to the provided writer. When a line is written using the returned
<code>NonBlocking</code> struct’s <code>make_writer</code> method, it will be enqueued to be
written by the worker thread.</p>
<p>The queue has a fixed capacity, and if it becomes full, any logs written
to it will be dropped until capacity is once again available. This may
occur if logs are consistently produced faster than the worker thread can
output them. The queue capacity and behavior when full (i.e., whether to
drop logs or to exert backpressure to slow down senders) can be configured
using <a href="./struct.NonBlockingBuilder.html#method.default"><code>NonBlockingBuilder::default()</code></a>.
This function returns the default configuration. It is equivalent to:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="ident">tracing_appender::non_blocking</span>(<span class="ident">std::io::stdout</span>())</code></pre></div>
<p><br/> This function returns a tuple of <code>NonBlocking</code> and <code>WorkerGuard</code>.
<code>NonBlocking</code> implements <a href="../../tracing_subscriber/fmt/writer/trait.MakeWriter.html" title="MakeWriter"><code>MakeWriter</code></a> which integrates with <code>tracing_subscriber</code>.
<code>WorkerGuard</code> is a drop guard that is responsible for flushing any remaining logs when
the program terminates.</p>
<p>Note that the <code>WorkerGuard</code> returned by <code>non_blocking</code> <em>must</em> be assigned to a binding that
is not <code>_</code>, as <code>_</code> will result in the <code>WorkerGuard</code> being dropped immediately.
Unintentional drops of <code>WorkerGuard</code> remove the guarantee that logs will be flushed
during a program’s termination, in a panic or otherwise.</p>
<p>See <a href="./struct.WorkerGuard.html"><code>WorkerGuard</code></a> for examples of using the guard.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> (<span class="ident">non_blocking</span>, <span class="ident">_guard</span>) <span class="op">=</span> <span class="ident">tracing_appender::non_blocking</span>(<span class="ident">std::io::stdout</span>());
<span class="kw">let</span> <span class="ident">subscriber</span> <span class="op">=</span> <span class="ident">tracing_subscriber::fmt</span>().<span class="ident">with_writer</span>(<span class="ident">non_blocking</span>);
<span class="ident">tracing::subscriber::with_default</span>(<span class="ident">subscriber</span>.<span class="ident">finish</span>(), <span class="op">|</span><span class="op">|</span> {
   <span class="macro">tracing::event!</span>(<span class="ident">tracing::Level::INFO</span>, <span class="string">&quot;Hello&quot;</span>);
});</code></pre></div>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="struct" href="struct.NonBlocking.html" title="tracing_appender::non_blocking::NonBlocking struct">NonBlocking</a></div><div class="item-right docblock-short"><p>A non-blocking writer.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.NonBlockingBuilder.html" title="tracing_appender::non_blocking::NonBlockingBuilder struct">NonBlockingBuilder</a></div><div class="item-right docblock-short"><p>A builder for <a href="./struct.NonBlocking.html"><code>NonBlocking</code></a>.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.WorkerGuard.html" title="tracing_appender::non_blocking::WorkerGuard struct">WorkerGuard</a></div><div class="item-right docblock-short"><p>A guard that flushes spans/events associated to a <a href="./struct.NonBlocking.html"><code>NonBlocking</code></a> on a drop</p>
</div></div><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="constant" href="constant.DEFAULT_BUFFERED_LINES_LIMIT.html" title="tracing_appender::non_blocking::DEFAULT_BUFFERED_LINES_LIMIT constant">DEFAULT_BUFFERED_LINES_LIMIT</a></div><div class="item-right docblock-short"><p>The default maximum number of buffered log lines.</p>
</div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="tracing_appender" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>